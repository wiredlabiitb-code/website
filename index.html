<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Lab Members</title>

<style>
  body {
    font-family: Arial, sans-serif;
    margin: 40px;
    background: #fafafa;
  }

  section {
    margin-bottom: 60px;
  }

  h2 {
    border-bottom: 2px solid #ddd;
    padding-bottom: 6px;
  }

  .grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 20px;
    margin-top: 20px;
  }

  .card {
    background: white;
    padding: 18px;
    border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    text-align: center;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .card:hover {
    transform: translateY(-4px);
    box-shadow: 0 6px 16px rgba(0,0,0,0.12);
  }

  /* Circular profile image */
  .photo {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    object-fit: cover;
    object-position: center;
    display: block;
    margin: 0 auto 12px auto;
    border: 2px solid #eee;
  }

  .role {
    color: #666;
    font-size: 14px;
    margin-bottom: 10px;
  }

  .tags {
    margin-top: 6px;
  }

  .tag {
    display: inline-block;
    background: #f3f3f3;
    border: 1px solid #e0e0e0;
    color: #333;
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 12px;
    margin: 3px;
    white-space: nowrap;
  }

  .label {
    font-size: 12px;
    font-weight: bold;
    margin-top: 8px;
    color: #444;
  }

  a {
    display: inline-block;
    margin-top: 8px;
    color: #0066cc;
    text-decoration: none;
    font-size: 14px;
  }

  a:hover {
    text-decoration: underline;
  }
</style>
</head>

<body>

<script>

async function loadSection(url, title) {
  try {
    const res = await fetch(url);
    if (!res.ok) return;

    const members = await res.json();
    if (!members.length) return;

    const section = document.createElement("section");

    const h2 = document.createElement("h2");
    h2.textContent = title;
    section.appendChild(h2);

    const grid = document.createElement("div");
    grid.className = "grid";

    const frag = document.createDocumentFragment();
    members.forEach(m => frag.appendChild(makeCard(m)));

    grid.appendChild(frag);
    section.appendChild(grid);
    document.body.appendChild(section);

  } catch (err) {
    console.error("Section load error:", err);
  }
}

function makeCard(m) {
  const card = document.createElement("div");
  card.className = "card";

  function makeTags(text) {
    if (!text) return "";
    return `
      <div class="tags">
        ${text.split(",").map(t => 
          `<span class="tag">${t.trim()}</span>`
        ).join("")}
      </div>
    `;
  }

  card.innerHTML = `
    <img class="photo"
         src="${m.photo || 'default-profile.png'}"
         alt="${m["Full Name"] || "Profile photo"}"
         loading="lazy"
         decoding="async">

    <h3>${m["Full Name"] || ""}</h3>
    <p class="role">${m["Role"] || ""}</p>

    ${m["Primary Research Interests"] 
        ? `<div class="label">Research Areas</div>
           ${makeTags(m["Primary Research Interests"])}` 
        : ""}

    ${m["Technical Focus"] 
        ? `<div class="label">Technical Focus</div>
           ${makeTags(m["Technical Focus"])}` 
        : ""}

    ${m["Personal Website"] 
        ? `<a href="${m["Personal Website"]}" target="_blank">Website</a>` 
        : ""}
  `;

  return card;
}

(async function(){
  await loadSection("data/staff.json", "Staff");
  await loadSection("data/graduate.json", "Graduate Students");
  await loadSection("data/undergraduate.json", "Undergraduate Students");
  await loadSection("data/alumni.json", "Alumni");
})();

</script>

</body>
</html>
