<script>
async function loadSection(url, title) {
  const res = await fetch(url);
  if (!res.ok) return;

  const members = await res.json();
  if (!members.length) return;

  const section = document.createElement("section");
  const h2 = document.createElement("h2");
  h2.textContent = title;
  section.appendChild(h2);

  const grid = document.createElement("div");
  grid.className = "grid";

  const frag = document.createDocumentFragment();

  members.forEach(m => frag.appendChild(makeCard(m)));

  grid.appendChild(frag);
  section.appendChild(grid);
  document.body.appendChild(section);
}

function makeCard(m) {
  const card = document.createElement("div");
  card.className = "card";

  card.innerHTML = `
    <img class="photo" src="${m.photo || 'default-profile.png'}">
    <h3>${m["Full Name"] || ""}</h3>
    <p class="role">${m["Role"] || ""}</p>
    ${m["Research Interests"] ? `<p><strong>Research:</strong> ${m["Research Interests"]}</p>` : ""}
    ${m["Hobbies"] ? `<p><strong>Hobbies:</strong> ${m["Hobbies"]}</p>` : ""}
    ${m["Personal Website"] ? `<a href="${m["Personal Website"]}" target="_blank">Website</a>` : ""}
  `;

  return card;
}

(async function(){
  await loadSection("data/staff.json", "Staff");
  await loadSection("data/graduate.json", "Graduate Students");
  await loadSection("data/undergrad.json", "Undergraduate Students");
  await loadSection("data/alumni.json", "Alumni");
})();
</script>
